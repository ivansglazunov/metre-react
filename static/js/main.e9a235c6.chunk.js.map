{"version":3,"sources":["analitics.js","simulate.js","components/example/view.tsx","components/store/params.tsx","components/store/props.tsx","components/store/state.tsx","components/store/index.tsx","components/example/store.tsx","pages/example/index.tsx","routes.js","pages/example/store-params.tsx","pages/example/store-props.tsx","pages/example/store-state.tsx","theme.js","index.js"],"names":["chance","require","isBrowser","localStorage","userId","setItem","concat","Date","valueOf","fbid","ReactGA","initialize","gaOptions","getItem","pageview","window","location","pathname","search","generator","Analitics","_React$Component","_getPrototypeOf2","_this","Object","classCallCheck","this","_len","arguments","length","args","Array","_key","possibleConstructorReturn","getPrototypeOf","call","apply","trackPage","page","set","inherits","createClass","key","value","props","prevProps","currentPage","nextPage","React","Component","withRouter","view","_ref","currentUser","setCurrentUser","count","setCount","react_default","a","createElement","Fragment","onClick","getValue","history","name","queryString","_","_packed","jsonpack","setValue","merge","newSearch","objectSpread","defineProperty","push","Provider","context","def","default","children","ResultContext","Context","useEffect","_ref$default","_useState","useState","_useState2","slicedToArray","createContext","store","_useContext","useContext","get","withTracker","assign","_useState3","_useState4","routes","react_router","path","component","params","store_props","data","state","Example","Routes","analitics","createMuiTheme","typography","useNextVariants","ReactDOM","hydrate","ThemeProvider","theme","react_router_dom","routes_Routes","document","getElementById","ssStyles","parentNode","removeChild"],"mappings":"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","file":"static/js/main.e9a235c6.chunk.js","sourcesContent":["import React from \"react\";\nimport { withRouter } from \"react-router\";\n\nimport { isBrowser } from \"react-device-detect\";\n\nimport ya, { YMInitializer } from \"react-yandex-metrika\";\nimport ReactGA from \"react-ga\";\n\nconst GA = null;\nconst YM = null;\n\nvar Chance = require(\"chance\");\nvar chance = new Chance();\n\nif (isBrowser && typeof localStorage === \"object\") {\n  if (!localStorage.userId)\n    localStorage.setItem(\"userId\", `${new Date().valueOf()}${chance.fbid()}`);\n  ReactGA.initialize(YM, {\n    gaOptions: {\n      userId: localStorage.getItem(\"userId\")\n    }\n  });\n  ReactGA.pageview(window.location.pathname + window.location.search);\n}\n\nexport class Analitics extends React.Component {\n  trackPage = page => {\n    ReactGA.set({ page });\n    ReactGA.pageview(page);\n  };\n  componentDidMount() {\n    const page = this.props.location.pathname;\n    this.trackPage(page);\n  }\n\n  componentDidUpdate(prevProps) {\n    const currentPage = prevProps.location.pathname;\n    const nextPage = this.props.location.pathname;\n\n    if (currentPage !== nextPage) {\n      this.trackPage(nextPage);\n    }\n  }\n\n  render() {\n    return GA && YM && isBrowser && typeof localStorage === \"object\" && (\n      <YMInitializer\n        accounts={[GA]}\n        options={{\n          clickmap: true,\n          trackLinks: true,\n          accurateTrackBounce: true,\n          webvisor: true,\n          trackHash: true,\n          userParams: {\n            userId: localStorage.getItem(\"userId\")\n          }\n        }}\n        version=\"2\"\n      />\n    )\n  }\n}\n\nexport default withRouter(Analitics);\n\nexport const event = (action) => {\n  ReactGA.event({ category: \"actions\", action });\n  ya(\"reachGoal\", action);\n};","import React from 'react';\n\n// Симулирует withTracker метеора. Вместо запросов к данным в generator нужно возвращать демо данные.\n// Нужен для удобства замены на реальный withTracker после завершения разработки прототипа интерфейса.\nexport default (generator) => {\n  return (Component) => {\n    return (props) => {\n      return <Component {...props} {...generator(props)}/>;\n    };\n  };\n};","import React from \"react\";\n\nexport default ({ currentUser, setCurrentUser, count, setCount }) => {\n  return (\n    <>\n      <button onClick={() => setCurrentUser(currentUser ? 0 : 123)}>\n        currentUser: {currentUser}\n      </button>\n      <button onClick={() => setCount(count + 1)}>{count}</button>\n    </>\n  );\n};\n","import * as jsonpack from \"jsonpack/main\";\nimport * as _ from \"lodash\";\nimport * as queryString from \"query-string\";\nimport React, { useEffect } from \"react\";\nimport { withRouter } from \"react-router\";\n\nimport { Context, IProps as IBaseProps } from \"./\";\n\nexport interface IProps extends IBaseProps {\n  name: string;\n\n  match: any;\n  location: any;\n  history: any;\n}\n\nexport const getValue = (history, name) => {\n  const search = queryString.parse(_.get(history, \"location.search\"));\n  const _packed = _.get(search, name);\n  const value = _packed ? jsonpack.unpack(_packed) : {};\n  return value;\n};\n\nexport const setValue = (history, name, merge) => {\n  const search = queryString.parse(_.get(history, \"location.search\"));\n  const _packed = _.get(search, name);\n  const value = _packed ? jsonpack.unpack(_packed) : {};\n  const newSearch = queryString.stringify({\n    ...search,\n    [name]: jsonpack.pack(_.defaults(merge, value))\n  });\n  history.push({\n    search: \"?\" + newSearch\n  });\n};\n\nexport const Component = ({\n  history,\n  name,\n  context,\n  default: def,\n  children\n}: IProps) => {\n  const ResultContext = context || Context;\n\n  useEffect(() => {\n    const value = getValue(history, name);\n    setValue(history, name, { ...def, ...value });\n  });\n  return (\n    <ResultContext.Provider\n      value={{\n        value: () => getValue(history, name),\n        set: merge => setValue(history, name, merge)\n      }}\n    >\n      {children}\n    </ResultContext.Provider>\n  );\n};\n\nexport const Provider = withRouter(Component);\n\nexport default Provider;\n","import React from \"react\";\n\nimport { IProps as IBaseProps, Context } from \"./\";\n\nexport interface IProps extends IBaseProps {\n  set?: (merge: any) => void;\n  value?: () => any;\n}\n\nexport const Provider = ({\n  set,\n  value,\n  context,\n  default: def,\n  children\n}: IProps) => {\n  const ResultContext = context || Context;\n  return (\n    <ResultContext.Provider value={{ value, set }}>\n      {children}\n    </ResultContext.Provider>\n  );\n};\n\nexport default Provider;\n","import React, { useState } from \"react\";\n\nimport { IProps as IBaseProps, Context } from \"./\";\n\nexport interface IProps extends IBaseProps {}\n\nexport const Provider = ({ context, default: def = {}, children }: IProps) => {\n  const [value, set] = useState(def);\n  const ResultContext = context || Context;\n  return (\n    <ResultContext.Provider\n      value={{ value: () => value, set: merge => set({ ...merge }) }}\n    >\n      {children}\n    </ResultContext.Provider>\n  );\n};\n\nexport default Provider;\n","import React from \"react\";\nimport Params from \"./params\";\nimport Props from \"./props\";\nimport State from \"./state\";\n\nexport interface IProps {\n  context?: any;\n  children?: any;\n  default?: any;\n\n  [key: string]: any;\n}\n\nexport interface IValue {\n  value: any;\n  set: (merge: any) => void;\n}\n\nexport const Context = React.createContext<any>({});\n\nexport { Params, Props, State };\n","import React, { useContext, useEffect } from \"react\";\n\nimport Example from \"./view\";\nimport { Context } from \"../store\";\n\nexport default () => {\n  const { value: get, set } = useContext(Context);\n  const value = get();\n\n  useEffect(() => {\n    if (typeof value.currentUser !== \"number\")\n      set({ ...value, currentUser: 0 });\n    if (typeof value.count !== \"number\") set({ ...value, count: 0 });\n  });\n\n  return (\n    <Example\n      currentUser={value.currentUser}\n      setCurrentUser={currentUser => set({ ...value, currentUser })}\n      count={value.count}\n      setCount={count => set({ ...value, count })}\n    />\n  );\n};\n","import React, { useState } from \"react\";\nimport withTracker from \"../../simulate\";\n\nimport { Example } from \"../../components/example\";\n\nexport default withTracker(() => {\n  const [currentUser, setCurrentUser] = useState(0);\n\n  return {\n    currentUser: currentUser,\n    setCurrentUser\n  };\n})(({ currentUser, setCurrentUser }) => {\n  const [count, setCount] = useState(0);\n\n  return (\n    <Example\n      currentUser={currentUser}\n      setCurrentUser={setCurrentUser}\n      count={count}\n      setCount={setCount}\n    />\n  );\n});\n","import React from \"react\";\nimport { Route, Switch } from \"react-router\";\n\nimport Analitics from \"./analitics\";\n\nimport \"./styles.css\";\nimport \"normalize.css\";\n\nimport Example from \"./pages/example/index\";\nimport storeParams from \"./pages/example/store-params\";\nimport storeProps from \"./pages/example/store-props\";\nimport storeState from \"./pages/example/store-state\";\n\nexport const routes = (\n  <Switch>\n    <Route path=\"/store-params\" component={storeParams} />\n    <Route path=\"/store-props\" component={storeProps} />\n    <Route path=\"/store-state\" component={storeState} />\n    <Route component={Example} />\n  </Switch>\n);\n\nexport default class Routes extends React.Component {\n  render() {\n    return (\n      <>\n        <Analitics />\n        {routes}\n      </>\n    );\n  }\n}\n","import React from \"react\";\n\nimport Store from \"../../components/store/params\";\nimport { StoreExample } from \"../../components/example\";\n\nexport default () => {\n  return (\n    <Store name=\"store\">\n      <StoreExample />\n    </Store>\n  );\n};\n","import React, { useState } from \"react\";\n\nimport Store from \"../../components/store/props\";\nimport { StoreExample } from \"../../components/example\";\n\nexport default () => {\n  const [value, set] = useState({});\n\n  return (\n    <Store value={() => value} set={data => set(data)}>\n      <StoreExample />\n    </Store>\n  );\n};\n","import React from \"react\";\n\nimport Store from \"../../components/store/state\";\nimport { StoreExample } from \"../../components/example\";\n\nexport default () => {\n  return (\n    <Store>\n      <StoreExample />\n    </Store>\n  );\n};\n","import { createMuiTheme } from \"@material-ui/core/styles\";\n\nexport default createMuiTheme({\n  typography: {\n    useNextVariants: true\n  }\n});\n","//routes index.js\n//import * as React from \"react\";\nimport React from \"react\";\n//import * as ReactDOM from \"react-dom\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport { ThemeProvider } from \"@material-ui/styles\";\n\n//import './normalize.css';\nimport Routes from \"./routes\";\nimport theme from \"./theme\";\n\nReactDOM.hydrate(\n  <ThemeProvider theme={theme}>\n    <BrowserRouter>\n      <Routes />\n    </BrowserRouter>\n  </ThemeProvider>,\n  document.getElementById(\"root\"),\n  () => {\n    const ssStyles = document.getElementById(\"jss-server-side\");\n    if (ssStyles) ssStyles.parentNode.removeChild(ssStyles);\n  }\n);\n"],"sourceRoot":""}